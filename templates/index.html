{% extends "base.html" %}

{% block content %}
<div class="card">
    <div id="image-list-container"
         ondrop="dropHandler(event)"
         ondragover="dragOverHandler(event)"
         ondragleave="dragLeaveHandler(event)">
        <div id="drop-hint" style="color: var(--text-muted); text-align: center; width: 100%;">Drop images or paste</div>
    </div>
    <div style="padding: 0.75rem; border-top: 1px solid var(--border);">
        <button class="btn btn-secondary" style="width: 100%; font-size: 12px;" onclick="clearInput()">Clear Input</button>
    </div>
</div>

<div class="card content-area">
    <div class="control-group">
        <select id="model-select">
            {% for model in models %}
            <option value="{{ model.id }}" {% if model.id == default_model %}selected{% endif %}>
                {{ model.id }}
            </option>
            {% endfor %}
        </select>

        <div class="toggle-container">
            <label for="reasoning-toggle">Reasoning</label>
            <label class="toggle-switch">
                <input type="checkbox" id="reasoning-toggle" {% if enable_reasoning_checked %}checked{% endif %}>
                <span class="toggle-slider"></span>
            </label>
        </div>
    </div>

    <div class="toolbar">
        <input type="text" id="user-prompt" placeholder="Additional prompt (Optional)">
        <button id="btn-recognize" class="btn" onclick="toggleRecognize()">Start</button>
        <button class="btn btn-secondary" onclick="copyResult()">Copy</button>
    </div>

    <!-- Dual-box container with dynamic height distribution -->
    <div id="dual-box-container" class="dual-box-container">
        <div id="reasoning-box" class="collapsible-box">
            <div class="box-header" onclick="toggleBox('reasoning')">
                <span class="box-title">Reasoning</span>
                <span class="box-status" id="reasoning-status"></span>
                <span id="reasoning-toggle-icon">▼</span>
            </div>
            <div class="box-body" id="reasoning-display"></div>
        </div>

        <div id="output-box" class="collapsible-box">
            <div class="box-header" onclick="toggleBox('output')">
                <span class="box-title">Output</span>
                <span class="box-status" id="output-status"></span>
                <span id="output-toggle-icon">▼</span>
            </div>
            <div class="box-body" id="result-display"></div>
        </div>
    </div>
</div>
{% endblock %}